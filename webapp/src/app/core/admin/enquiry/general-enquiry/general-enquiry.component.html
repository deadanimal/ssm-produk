<ngx-loading-bar ref="http" height="4px" color="#fff"></ngx-loading-bar>
<div class="header pb-6">
    <div class="container-fluid">
        <div class="header-body">
            <div class="row align-items-center py-4">
                <div class="col-lg-6 col-7">
                    <h6 class="h2 text-dark d-inline-block mb-0">General Enquiry</h6>

                    <nav aria-label="breadcrumb" class=" d-none d-md-inline-block ml-md-4">
                        <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                            <li class="breadcrumb-item">
                                <a href="javascript:void(0)">
                                    <i class="fas fa-align-left text-dark"></i>
                                </a>
                            </li>
                            <li class="breadcrumb-item">
                                <a href="javascript:void(0)" class="text-dark"> Enquiry </a>
                            </li>
                            <li aria-current="page" class="breadcrumb-item active">
                                General Enquiry
                            </li>
                        </ol>
                    </nav>
                </div>
            </div>

            <div class="row">
                <div class="col-xl-3 col-md-6">
                    <div class="card card-stats bg-warning">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h5 class=" card-title text-uppercase text- mb-0">
                                        In Progress
                                    </h5>

                                    <span class=" h2 font-weight-bold mb-0"> {{inProgressTicket.length}} </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6">
                    <div class="card card-stats bg-danger">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h5 class=" card-title text-uppercase text- mb-0">
                                        Pending
                                    </h5>

                                    <span class=" h2 font-weight-bold mb-0"> {{pendingTicket.length}} </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6">
                    <div class="card card-stats bg-success">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h5 class=" card-title text-uppercase text- mb-0">
                                        Closed
                                    </h5>

                                    <span class=" h2 font-weight-bold mb-0"> {{closedTicket.length}} </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6">
                    <div class="card card-stats bg-info">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h5 class=" card-title text-uppercase text- mb-0">
                                        Total
                                    </h5>

                                    <span class=" h2 font-weight-bold mb-0"> {{allTicket.length}} </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid mt--6">
    <div class="row">
        <div class="col">
            <div class="nav-wrapper">
                <tabset type="pills" class="nav-fill flex-column flex-md-row">
                    <tab heading="In Progress">
                        <div class="card mt-2">
                            <div class="dataTables_wrapper py-4">
                                <div class="row">
                                    <div class="col-sm-12 col-md-6">
                                        <div class="dataTables_length" id="datatable_length">
                                            <label>
                                                Show
                                                <select name="datatable_length" aria-controls="datatable"
                                                    class="form-control form-control-sm"
                                                    (change)="entriesChange($event)">
                                                    <option value="10">10</option>
                                                    <option value="25">25</option>
                                                    <option value="50">50</option>
                                                    <option value="100">100</option>
                                                    <option value="-1">All</option>
                                                </select>
                                                records
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-md-6">
                                    </div>
                                </div>

                                <ngx-datatable 
                                    class="bootstrap" 
                                    [columnMode]="'force'"
                                    [headerHeight]="50" 
                                    [footerHeight]="50" 
                                    [rowHeight]="'auto'"
                                    [limit]="tableInProgressEntries != -1 ? tableInProgressEntries : undefined"
                                    [rows]="tableInProgressTemp" 
                                    [scrollbarH]="true"
                                >
                                    <ngx-datatable-column
                                        [width]="80"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="id_index"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>No.</span>
                                        </ng-template>

                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.id_index}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="ticket_no"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Ticket #</span>
                                        </ng-template>

                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.ticket_no}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="user.username"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Email Address</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.user.username}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="140"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="user.phone_number"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Tel No.</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.user.phone_number}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="140"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="receipt_number"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Receipt No.</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.receipt_number}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="topic.name_en"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Topic</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            <span *ngIf="row.topic?.name_en">
                                                {{row.topic?.name_en}}
                                            </span>
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="subject.name_en"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Subject</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            <span *ngIf="row.subject?.name_en">
                                                {{row.subject?.name_en}}
                                            </span>
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="created_date_"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Created Date</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.created_date_}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="modified_date_"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Modified Date</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.modified_date_}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Form Type</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.ticket_type}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Aging</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Status</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            <span *ngIf="row.ticket_status == 'RS'">Closed</span> 
                                            <span *ngIf="row.ticket_status == 'US'">In Progress</span> 
                                            <span *ngIf="row.ticket_status == 'IP'">In Progress</span> 
                                            <span *ngIf="row.ticket_status == 'IQ'">In Progress - Response Required</span> 
                                            <span *ngIf="row.ticket_status == 'IC'">In Progress - Response Received</span> 
                                            <span *ngIf="row.ticket_status == 'EC'">Escalation</span> 
                                            <span *ngIf="row.ticket_status == 'CA'">Closed - Assigned</span> 
                                            <span *ngIf="row.ticket_status == 'CR'">Closed - Not Related</span> 
                                            <span *ngIf="row.ticket_status == 'CD'">Closed - Not Responded</span> 
                                            <span *ngIf="row.ticket_status == 'CO'">Closed - Resolved</span> 
                                            <span *ngIf="row.ticket_status == 'CL'">Closed</span> 
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Action</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            <a style="cursor: pointer" (click)="viewTicket(row)">
                                                <button class="btn btn-sm btn-info">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </a>
                                        </ng-template>
                                    </ngx-datatable-column>
                                </ngx-datatable>
                            </div>
                        </div>
                    </tab>

                    <tab heading="Pending">
                        <div class="card mt-2">
                            <div class="dataTables_wrapper py-4">
                                <div class="row">
                                    <div class="col-sm-12 col-md-6">
                                        <div class="dataTables_length" id="datatable_length">
                                            <label>
                                                Show
                                                <select name="datatable_length" aria-controls="datatable"
                                                    class="form-control form-control-sm"
                                                    (change)="entriesChange($event)">
                                                    <option value="10">10</option>
                                                    <option value="25">25</option>
                                                    <option value="50">50</option>
                                                    <option value="100">100</option>
                                                    <option value="-1">All</option>
                                                </select>
                                                records
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-md-6">
                                    </div>
                                </div>

                                <ngx-datatable class="bootstrap selection-cell" [columnMode]="'force'"
                                    [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'"
                                    [limit]="tablePendingEntries != -1 ? tablePendingEntries : undefined"
                                    [rows]="tablePendingTemp" [scrollbarH]="true" (activate)="onActivate($event)">
                                    <ngx-datatable-column
                                        [width]="80"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="id_index"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>No.</span>
                                        </ng-template>

                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.id_index}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="ticket_no"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Ticket #</span>
                                        </ng-template>

                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.ticket_no}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="user.username"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Email Address</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.user.username}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="140"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="user.phone_number"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Tel No.</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.user.phone_number}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="140"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="receipt_number"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Receipt No.</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.receipt_number}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="topic.name_en"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Topic</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.topic?.name_en}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="subject.name_en"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Subject</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.subject?.name_en}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [sortable]="true"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="created_date_"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Created Date</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.created_date_}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [sortable]="true"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="modified_date_"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Modified Date</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.modified_date_}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Form Type</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.ticket_type}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Aging</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Status</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            <span *ngIf="row.ticket_status == 'RS'">Closed</span> 
                                            <span *ngIf="row.ticket_status == 'US'">In Progress</span> 
                                            <span *ngIf="row.ticket_status == 'IP'">In Progress</span> 
                                            <span *ngIf="row.ticket_status == 'IQ'">In Progress - Response Required</span> 
                                            <span *ngIf="row.ticket_status == 'IC'">In Progress - Response Received</span> 
                                            <span *ngIf="row.ticket_status == 'EC'">Escalation</span> 
                                            <span *ngIf="row.ticket_status == 'CA'">Closed - Assigned</span> 
                                            <span *ngIf="row.ticket_status == 'CR'">Closed - Not Related</span> 
                                            <span *ngIf="row.ticket_status == 'CD'">Closed - Not Responded</span> 
                                            <span *ngIf="row.ticket_status == 'CO'">Closed - Resolved</span> 
                                            <span *ngIf="row.ticket_status == 'CL'">Closed</span> 
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Action</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            <a style="cursor: pointer" (click)="viewTicket(row)">
                                                <button class="btn btn-sm btn-info">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </a>
                                        </ng-template>
                                    </ngx-datatable-column>
                                </ngx-datatable>
                            </div>
                        </div>
                    </tab>

                    <tab heading="Closed">
                        <div class="card mt-2">
                            <div class="dataTables_wrapper py-4">
                                <div class="row">
                                    <div class="col-sm-12 col-md-6">
                                        <div class="dataTables_length" id="datatable_length">
                                            <label>
                                                Show
                                                <select name="datatable_length" aria-controls="datatable"
                                                    class="form-control form-control-sm"
                                                    (change)="entriesChange($event)">
                                                    <option value="20">20</option>
                                                    <option value="50">50</option>
                                                    <option value="100">100</option>
                                                    <option value="-1">All</option>
                                                </select>
                                                records
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-md-6">
                                    </div>
                                </div>

                                <ngx-datatable class="bootstrap selection-cell" [columnMode]="'force'"
                                    [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'"
                                    [limit]="tableClosedEntries != -1 ? tableClosedEntries : undefined"
                                    [rows]="tableClosedTemp" [scrollbarH]="true" (activate)="onActivate($event)">
                                    <ngx-datatable-column
                                        [width]="80"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="id_index"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>No.</span>
                                        </ng-template>

                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.id_index}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="ticket_no"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Ticket #</span>
                                        </ng-template>

                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.ticket_no}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="user.username"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Email Address</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.user.username}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="140"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="user.phone_number"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Tel No.</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.user.phone_number}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="140"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="receipt_number"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Receipt No.</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.receipt_number}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="topic.name_en"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Topic</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.topic?.name_en}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="subject.name_en"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Subject</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.subject?.name_en}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [resizeable]="false"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="created_date_"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Created Date</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.created_date_}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [resizeable]="false"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="modified_date_"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Modified Date</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.modified_date_}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Form Type</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.ticket_type}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Aging</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Status</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            <span *ngIf="row.ticket_status == 'RS'">Closed</span> 
                                            <span *ngIf="row.ticket_status == 'US'">In Progress</span> 
                                            <span *ngIf="row.ticket_status == 'IP'">In Progress</span> 
                                            <span *ngIf="row.ticket_status == 'IQ'">In Progress - Response Required</span> 
                                            <span *ngIf="row.ticket_status == 'IC'">In Progress - Response Received</span> 
                                            <span *ngIf="row.ticket_status == 'EC'">Escalation</span> 
                                            <span *ngIf="row.ticket_status == 'CA'">Closed - Assigned</span> 
                                            <span *ngIf="row.ticket_status == 'CR'">Closed - Not Related</span> 
                                            <span *ngIf="row.ticket_status == 'CD'">Closed - Not Responded</span> 
                                            <span *ngIf="row.ticket_status == 'CO'">Closed - Resolved</span> 
                                            <span *ngIf="row.ticket_status == 'CL'">Closed</span> 
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Action</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            <a style="cursor: pointer" (click)="viewTicket(row)">
                                                <button class="btn btn-sm btn-info">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </a>
                                        </ng-template>
                                    </ngx-datatable-column>
                                </ngx-datatable>
                            </div>
                        </div>
                    </tab>

                    <tab heading="All">
                        <div class="card mt-2">
                            <div class="text-right">
                                <div class="my-1 mr-4 dropdown" dropdown placement="bottom-right">
                                    <button 
                                        class="btn btn-outline-default dropdown-toggle"
                                        type="button" 
                                        id="dropdownMenuButton" 
                                        dropdownToggle
                                    >
                                          Export
                                    </button>
                                    <div  
                                        aria-labelledby="dropdownMenuButton" 
                                        *dropdownMenu 
                                        class="dropdown-menu dropdown-menu-right"
                                    >
                                          <a class="dropdown-item" (click)="exportExcel()">Excel</a>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dataTables_wrapper py-4">
                                <div class="row">
                                    <div class="col-sm-12 col-md-6">
                                        <div class="dataTables_length" id="datatable_length">
                                            <label>
                                                Show
                                                <select name="datatable_length" aria-controls="datatable"
                                                    class="form-control form-control-sm"
                                                    (change)="entriesChange($event)">
                                                    <option value="10">10</option>
                                                    <option value="25">25</option>
                                                    <option value="50">50</option>
                                                    <option value="100">100</option>
                                                    <option value="-1">All</option>
                                                </select>
                                                records
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-md-6">
                                    </div>
                                </div>

                                <ngx-datatable 
                                    class="bootstrap selection-cell" 
                                    [columnMode]="'force'"
                                    [headerHeight]="50" 
                                    [footerHeight]="50" 
                                    [rowHeight]="'auto'"
                                    [limit]="tableEntries != -1 ? tableEntries : undefined" 
                                    [rows]="tableTemp"
                                    [scrollbarH]="true" 
                                    (activate)="onActivate($event)"
                                >
                                    <ngx-datatable-column
                                        [width]="80"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="id_index"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>No.</span>
                                        </ng-template>

                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.id_index}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="ticket_no"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Ticket #</span>
                                        </ng-template>

                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.ticket_no}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="user.username"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Email Address</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.user.username}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="140"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="user.phone_number"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Tel No.</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.user.phone_number}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="140"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="receipt_number"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Receipt No.</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.receipt_number}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="topic.name_en"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Topic</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.topic?.name_en}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        [width]="180"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="subject.name_en"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Subject</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.subject?.name_en}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        prop="subject.name_en"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="created_date_"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Created Date</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.created_date_}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column
                                        prop="subject.name_en"
                                        [sortable]="true"
                                        [resizeable]="false"
                                        prop="modified_date_"
                                    >
                                        <ng-template ngx-datatable-header-template>
                                            <span>Modified Date</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.modified_date_}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Form Type</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.ticket_type}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Aging</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Status</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            <span *ngIf="row.ticket_status == 'RS'">Closed</span> 
                                            <span *ngIf="row.ticket_status == 'US'">In Progress</span> 
                                            <span *ngIf="row.ticket_status == 'IP'">In Progress</span> 
                                            <span *ngIf="row.ticket_status == 'IQ'">In Progress - Response Required</span> 
                                            <span *ngIf="row.ticket_status == 'IC'">In Progress - Response Received</span> 
                                            <span *ngIf="row.ticket_status == 'EC'">Escalation</span> 
                                            <span *ngIf="row.ticket_status == 'CA'">Closed - Assigned</span> 
                                            <span *ngIf="row.ticket_status == 'CR'">Closed - Not Related</span> 
                                            <span *ngIf="row.ticket_status == 'CD'">Closed - Not Responded</span> 
                                            <span *ngIf="row.ticket_status == 'CO'">Closed - Resolved</span> 
                                            <span *ngIf="row.ticket_status == 'CL'">Closed</span> 
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column>
                                        <ng-template ngx-datatable-header-template>
                                            <span>Action</span>
                                        </ng-template>
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            <a style="cursor: pointer" (click)="viewTicket(row)">
                                                <button class="btn btn-sm btn-info">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </a>
                                        </ng-template>
                                    </ngx-datatable-column>
                                </ngx-datatable>
                            </div>
                        </div>
                    </tab>
                </tabset>
            </div>
        </div>
    </div>
</div>

<div class="table" id="reportTable" #reportTable [hidden]="isHidden">
	<table class="table table-responsive table-flush">
		<thead>
			<tr>
				<th>No.</th>
				<th>Ticket #</th>
				<th>Email Address</th>
				<th>Tel No.</th>
                <th>Receipt No.</th>
                <th>Topic</th>
				<th>Subject</th>
				<th>Created Date</th>
				<th>Modified Date</th>
				<th>Form Type</th>
                <th>Aging</th>
                <th>Status</th>
			</tr>
		</thead>

		<tbody>
			<tr *ngFor="let row of tableTemp">
                <td>
                    {{row.id_index}}
                </td>
				<td>
					{{row.ticket_no}}
				</td>
				<td>
					{{row.user.username}}
				</td>
				<td>
					{{row.user.phone_number}}
				</td>
				<td>
					{{row.receipt_number}}
				</td>
				<td>
					{{row.topic?.name_en}}
				</td>
				<td>
					{{row.subject?.name_en}}
				</td>
				<td>
					{{row.created_date_}}
				</td>
				<td>
					{{row.modified_date_}}
				</td>
				<td>
					{{row.ticket_type}}
				</td>
				<td>
					
                </td>
                <td>
                    <span *ngIf="row.ticket_status == 'RS'">Closed</span> 
                    <span *ngIf="row.ticket_status == 'US'">In Progress</span> 
                    <span *ngIf="row.ticket_status == 'IP'">In Progress</span> 
                    <span *ngIf="row.ticket_status == 'IQ'">In Progress - Response Required</span> 
                    <span *ngIf="row.ticket_status == 'IC'">In Progress - Response Received</span> 
                    <span *ngIf="row.ticket_status == 'AS'">Assigned</span> 
                    <span *ngIf="row.ticket_status == 'EC'">Escalation</span> 
                    <span *ngIf="row.ticket_status == 'CA'">Closed - Assigned</span> 
                    <span *ngIf="row.ticket_status == 'CR'">Closed - Not Related</span> 
                    <span *ngIf="row.ticket_status == 'CD'">Closed - Not Responded</span> 
                    <span *ngIf="row.ticket_status == 'CO'">Closed - Resolved</span> 
                    <span *ngIf="row.ticket_status == 'CL'">Closed</span> 
                </td>
			</tr>
		</tbody>
	</table>
</div>